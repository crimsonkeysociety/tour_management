{% extends "base.html" %}
{% load staticfiles %}
{% load app_filters %}

{% block title %} CKS Roster {% endblock %}

{% block custom_head %}
	<link rel="stylesheet/less" type="text/css" media="all" href="{% static "app/less/roster.less" %}"  />
{% endblock %}

{% block content %}
<h1>CKS Roster</h1>

<table class="table table-striped table-bordered roster">

	<thead>
		<th>First</th>
		<th>Last</th>
		<th>Email</th>
		<th>Phone</th>
		<th>Year</th>
		<th>House</th>
		<th>Notes</th>
		<th>Tours</th>
		<th>Shifts</th>
	</thead>

	<tbody>
		{% for person in people %}
			<tr>
				<td>{{ person.first_name }}</td>
				<td>{{ person.last_name }}</td>
				<td>{{ person.email }}</td>
				<td>{{ person.phone|format_phone }}</td>
				<td>{{ person.year }}</td>
				<td>{% if person.house %}{{ person.house }}{% endif %}</td>
				<td>{{ person.notes }}</td>
				<td>{% for tour in person.past_tours %}
						<a href="{% url 'tour-url' tour.id %}" class="hint hint--top requirement_circle{% if tour.missed %} missed{% else %}{% if tour.late %} late{% else %} complete{% endif %}{% endif %}" data-hint="{{ tour.source }} tour on {{ tour.time|date:"m/d" }}{% if tour.missed %} (missed){% else %}{% if tour.late %} (late){% endif %}{% endif %}"></a>
					{% endfor %}

					{% for tour in person.upcoming_tours %}
						<a href="{% url 'tour-url' tour.id %}" class="hint hint--top requirement_circle upcoming" data-hint="{{ tour.source }} tour on {{ tour.time|date:"m/d" }} (upcoming)"></a>
					{% endfor %}

					{% if person.empties %}
						{% for i in person.empties|get_range %}
							<div class="requirement_circle empty"></div>
						{% endfor %}
					{% endif %}


					</td>
				<td></td>
			</tr>
		{% endfor %}
	</tbody>
</table>

{% endblock %}