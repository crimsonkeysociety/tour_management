{% extends "base.html" %}
{% load staticfiles %}
{% load widget_tweaks %}
{% load app_filters %}

{% block title %} CKS Tour Management {% endblock %}

{% block custom_head %}
	{% with "settings" as filename %}
		<link {% if style_protocol == 'less' %} type="text/css" rel="stylesheet/less" media="all" {% else %} rel="stylesheet" {% endif %} href="{% static "app/"|add:style_protocol|add:"/"|add:filename|add:"."|add:style_protocol %}"  />
	{% endwith %}
	
	<script src="{% static "app/js/jquery-ui-timepicker-addon.js" %}"></script>
	<link type="text/css" href="{% static "app/css/jquery-ui-timepicker-addon.css"%}" rel="stylesheet" />
	<script src="{% static "app/js/tours.js" %}" type="text/javascript"></script>
{% endblock %}

{% block content %}
<h1>Settings</h1>
<form method="post">
	<div class="row">
		<div class="col-sm-8 col-sm-offset-2">
				{% csrf_token %}
				{{ formset.management_form }}
				<table class="table table-striped settings-table">
					<tbody>
						{% for setting in settings %}
						<tr>
							<td>
								<h3 class="settings-header">{{ setting.name|field_name }}</h3>
								<span class="settings-description">{{ setting.description }}</span>
							</td>
							<td>
								{% if perms.app.add_setting %}
									{% settings_form forms_by_name setting.name %}
								{% else %}
									{{ setting.value }}
								{% endif %}
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
		</div>
	</div>
	{% if perms.app.add_setting %}
		<div class="row">
			<div class="btn-container">
				<button type="submit" class="btn btn-danger">Submit</button>
			</div>
		</div>
	{% endif %}
</form>
{% endblock %}